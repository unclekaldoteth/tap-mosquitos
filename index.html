<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="base:app_id" content="695ad88a4d3a403912ed8d41" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tap That Mosquito! ü¶ü</title>
    <meta name="description"
        content="A fun pixel art mosquito tapping game. Tap as many mosquitoes as you can in 60 seconds!">

    <!-- Base Mini App Embed Metadata -->
    <meta name="fc:miniapp" content='{
      "version": "next",
      "imageUrl": "https://tap-mosquito.vercel.app/og.png",
      "button": {
        "title": "Play Now",
        "action": {
          "type": "launch_miniapp",
          "name": "Tap That Mosquito",
          "url": "https://tap-mosquito.vercel.app",
          "splashImageUrl": "https://tap-mosquito.vercel.app/splash.png",
          "splashBackgroundColor": "#0a0a0f"
        }
      }
    }' />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="game-container">
        <!-- Header with score and timer -->
        <header class="game-header">
            <div class="score-display">
                <span class="label">SCORE</span>
                <span id="score" class="value">0</span>
            </div>
            <div class="timer-display">
                <span class="label">TIME</span>
                <span id="timer" class="value">60</span>
            </div>
            <div class="wallet-display">
                <button id="wallet-btn" class="wallet-btn" title="Connect Wallet">
                    <span id="wallet-text">üîó</span>
                </button>
            </div>
        </header>

        <!-- Main play area -->
        <main id="play-area" class="play-area">
            <!-- Mosquitoes spawn here -->
        </main>

        <!-- Challenge Received Modal -->
        <div id="challenge-received-modal" class="overlay hidden">
            <div class="overlay-content challenge-received-content">
                <div class="challenge-icon">‚öîÔ∏è</div>
                <h2 class="challenge-title">CHALLENGE RECEIVED!</h2>
                <p class="challenge-from">@<span id="challenger-name">challenger</span> challenges you!</p>
                <p class="challenge-desc">Beat their score to earn a Victory NFT!</p>
                <div class="challenge-buttons">
                    <button id="accept-challenge-btn" class="pixel-btn accept">ACCEPT</button>
                    <button id="decline-challenge-btn" class="pixel-btn decline">DECLINE</button>
                </div>
            </div>
        </div>


        <!-- Onboarding Modal (first-time users) -->
        <div id="onboarding-modal" class="overlay hidden">
            <div class="overlay-content onboarding-content">
                <div id="onboarding-slides" class="onboarding-slides">
                    <!-- Slide 1 -->
                    <div class="onboarding-slide active" data-slide="0">
                        <div class="onboarding-icon">ü¶ü</div>
                        <h2 class="onboarding-title">Welcome!</h2>
                        <p class="onboarding-text">Tap mosquitoes before they fly away. You have 60 seconds!</p>
                    </div>
                    <!-- Slide 2 -->
                    <div class="onboarding-slide" data-slide="1">
                        <div class="onboarding-icon">‚ö°</div>
                        <h2 class="onboarding-title">Build Combos</h2>
                        <p class="onboarding-text">Tap quickly to build combos and earn bonus points. Watch out for
                            hazards!</p>
                    </div>
                    <!-- Slide 3 -->
                    <div class="onboarding-slide" data-slide="2">
                        <div class="onboarding-icon">‚ö†Ô∏è</div>
                        <h2 class="onboarding-title">Avoid Hazards!</h2>
                        <p class="onboarding-text">Don't tap üêù bees or üíÄ skulls - they reduce your score and break
                            your combo!</p>
                    </div>
                    <!-- Slide 4 -->
                    <div class="onboarding-slide" data-slide="3">
                        <div class="onboarding-icon">üèÜ</div>
                        <h2 class="onboarding-title">Compete & Earn</h2>
                        <p class="onboarding-text">Climb the leaderboard and mint achievement NFTs for your high scores!
                        </p>
                    </div>
                </div>
                <div class="onboarding-dots">
                    <span class="dot active" data-slide="0"></span>
                    <span class="dot" data-slide="1"></span>
                    <span class="dot" data-slide="2"></span>
                    <span class="dot" data-slide="3"></span>
                </div>
                <button id="onboarding-next-btn" class="pixel-btn">NEXT</button>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="overlay">
            <div class="overlay-content">
                <h1 class="game-title">TAP THAT<br>MOSQUITO!</h1>
                <div class="mosquito-icon">ü¶ü</div>
                <p class="instructions">Tap mosquitoes before they escape!</p>
                <p class="sub-instructions">60 seconds ‚Ä¢ Combo bonus</p>

                <!-- Wallet Connection Status -->
                <div id="wallet-status" class="wallet-status disconnected">
                    <span id="wallet-status-icon">üîó</span>
                    <span id="wallet-status-text">Connect Wallet</span>
                </div>

                <!-- Game Content - Hidden until wallet connected -->
                <div id="game-content" class="game-content hidden">
                    <div class="start-buttons">
                        <button id="start-btn" class="pixel-btn">SOLO GAME</button>
                        <button id="versus-btn" class="pixel-btn versus-btn">‚öîÔ∏è VERSUS</button>
                        <button id="leaderboard-btn" class="pixel-btn share-btn"
                            style="background: #202040; border-color: #404060;">üèÜ LEADERBOARD</button>
                    </div>

                    <!-- Sponsor Wall -->
                    <div id="sponsor-wall" class="sponsor-wall">
                        <div class="sponsor-header">
                            <span class="sponsor-title">üèÜ SPONSORS</span>
                            <span id="pool-balance" class="pool-balance">$0 Pool</span>
                        </div>
                        <div id="sponsor-list" class="sponsor-list">
                            <span class="no-sponsors">Be the first sponsor!</span>
                        </div>
                        <button id="become-sponsor-btn" class="sponsor-btn">üíé Become a Sponsor</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div id="leaderboard-modal" class="overlay hidden">
            <div class="overlay-content">
                <h2 class="game-title" style="font-size: 20px; margin-bottom: 20px;">üèÜ TOP PLAYERS</h2>
                <div class="leaderboard-section">
                    <div id="home-leaderboard-list" class="leaderboard-list">
                        <div class="leaderboard-entry">Loading...</div>
                    </div>
                </div>
                <button id="close-leaderboard-btn" class="pixel-btn small">‚Üê CLOSE</button>
            </div>
        </div>

        <!-- Sponsor Modal -->
        <div id="sponsor-modal" class="overlay hidden">
            <div class="overlay-content sponsor-modal-content">
                <h2 class="sponsor-modal-title">üíé BECOME A SPONSOR</h2>
                <p class="sponsor-modal-subtitle">Fund the prize pool & get perks!</p>

                <div class="sponsor-tiers">
                    <button class="tier-btn bronze" data-amount="3">
                        <span class="tier-icon">ü•â</span>
                        <span class="tier-name">Bronze</span>
                        <span class="tier-price">$3</span>
                        <span class="tier-perk">Name on Wall</span>
                    </button>
                    <button class="tier-btn silver" data-amount="5">
                        <span class="tier-icon">ü•à</span>
                        <span class="tier-name">Silver</span>
                        <span class="tier-price">$5</span>
                        <span class="tier-perk">+ Game Boosts</span>
                    </button>
                    <button class="tier-btn gold" data-amount="10">
                        <span class="tier-icon">ü•á</span>
                        <span class="tier-name">Gold</span>
                        <span class="tier-price">$10</span>
                        <span class="tier-perk">+ Sponsor NFT</span>
                    </button>
                    <button class="tier-btn diamond" data-amount="20">
                        <span class="tier-icon">üíé</span>
                        <span class="tier-name">Diamond</span>
                        <span class="tier-price">$20</span>
                        <span class="tier-perk">+ Featured</span>
                    </button>
                </div>

                <p id="sponsor-status" class="sponsor-status"></p>
                <button id="close-sponsor-modal" class="pixel-btn small">‚Üê CLOSE</button>
            </div>
        </div>

        <!-- Versus Challenge Screen -->
        <div id="versus-screen" class="overlay hidden">
            <div class="overlay-content versus-content">
                <h2 class="versus-title">‚öîÔ∏è VERSUS MODE</h2>
                <p class="versus-subtitle">Challenge a friend to battle!</p>

                <div class="challenge-options">
                    <div class="challenge-option">
                        <h3>üì§ Create Challenge</h3>
                        <input type="text" id="opponent-username" class="username-input"
                            placeholder="Enter username (e.g. @vitalik)" />
                        <button id="create-challenge-btn" class="action-btn">SEND CHALLENGE</button>
                        <p id="challenge-status" class="challenge-status"></p>
                    </div>

                    <div class="divider">OR</div>

                    <div class="challenge-option">
                        <h3>üì• Pending Challenges</h3>
                        <div id="pending-challenges" class="pending-list">
                            <p class="no-challenges">No pending challenges</p>
                        </div>
                    </div>
                </div>

                <button id="back-to-menu-btn" class="pixel-btn small">‚Üê BACK</button>
            </div>
        </div>

        <!-- Versus Waiting Screen -->
        <div id="versus-waiting" class="overlay hidden">
            <div class="overlay-content">
                <h2 class="waiting-title">‚è≥ WAITING</h2>
                <div class="waiting-animation">‚öîÔ∏è</div>
                <p id="waiting-text">Waiting for opponent...</p>
                <button id="cancel-challenge-btn" class="pixel-btn small">CANCEL</button>
            </div>
        </div>

        <!-- Versus Result Screen -->
        <div id="versus-result-screen" class="overlay hidden">
            <div class="overlay-content versus-result-content">
                <h2 id="versus-result-title" class="versus-result-title">üèÜ VICTORY!</h2>

                <div class="versus-scores">
                    <div class="player-score you">
                        <span class="player-label">YOU</span>
                        <span id="your-versus-score" class="score-value">0</span>
                    </div>
                    <div class="vs-divider">VS</div>
                    <div class="player-score opponent">
                        <span class="player-label">OPPONENT</span>
                        <span id="opponent-versus-score" class="score-value">0</span>
                    </div>
                </div>

                <div id="winner-mint-section" class="winner-section">
                    <p class="winner-text">üéâ You earned a Victory NFT!</p>
                    <button id="mint-victory-btn" class="action-btn mint-btn">üèÜ MINT VICTORY NFT</button>
                </div>

                <div id="loser-section" class="loser-section hidden">
                    <p class="loser-text">Better luck next time! üí™</p>
                </div>

                <div class="versus-result-buttons">
                    <button id="rematch-btn" class="pixel-btn">üîÑ REMATCH</button>
                    <button id="challenge-another-btn" class="pixel-btn">‚öîÔ∏è CHALLENGE ANOTHER</button>
                    <button id="versus-menu-btn" class="pixel-btn small">‚Üê MENU</button>
                </div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen" class="overlay hidden">
            <div class="overlay-content game-over-content">
                <h2 class="game-over-title">TIME'S UP!</h2>

                <!-- Achievement Badge -->
                <div id="achievement-badge" class="achievement-badge">
                    <span id="achievement-icon">üéñÔ∏è</span>
                    <span id="achievement-name">Beginner</span>
                </div>

                <div class="final-score">
                    <span class="label">FINAL SCORE</span>
                    <span id="final-score" class="value">0</span>
                </div>

                <div id="rank-display" class="rank-display hidden">
                    <span>RANK #</span><span id="player-rank">1</span>
                </div>

                <div id="new-highscore" class="new-highscore hidden">üèÜ NEW RECORD! üèÜ</div>

                <div class="stats">
                    <div class="stat">
                        <span class="stat-label">Tapped</span>
                        <span id="tapped-count" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Escaped</span>
                        <span id="escaped-count" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Best Combo</span>
                        <span id="best-combo" class="stat-value">x1</span>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="leaderboard-section">
                    <h3 class="leaderboard-title">üèÜ LEADERBOARD</h3>
                    <div id="leaderboard-list" class="leaderboard-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="game-over-buttons">
                    <button id="mint-btn" class="action-btn mint-btn hidden">üéñÔ∏è MINT NFT</button>
                    <button id="share-btn" class="action-btn share-btn">üì¢ SHARE</button>
                    <button id="restart-btn" class="pixel-btn">PLAY AGAIN</button>
                    <button id="menu-btn" class="pixel-btn small">‚Üê MENU</button>
                </div>
            </div>
        </div>

        <!-- Combo indicator -->
        <div id="combo-indicator" class="combo-indicator hidden">
            <span id="combo-text">x2 COMBO!</span>
        </div>

        <!-- Sound toggle -->
        <button id="sound-toggle" class="sound-toggle" title="Toggle Sound">
            <span id="sound-icon">üîä</span>
        </button>
    </div>

    <script type="module" src="game.js"></script>
</body>

</html>